
/*
 * This file was generated by Meeduse on Monday, May 17, 2021 at 3:02:36 PM CEST
 */


MACHINE 
	
	ptnet

DEFINITIONS
	


	END_OF_GENERATED_DEFINITIONS_FOR == ptnet;
	

SETS
	
	pnmlcoremodel_ID_AS;
	pnmlcoremodel_LABEL

ABSTRACT_VARIABLES
	
	pnmlcoremodel_ID,
	pnmlcoremodel_Label,
	pnmlcoremodel_Object,
	PTMarking,
	PTArcAnnotation,
	pnmlcoremodel_Node,
	pnmlcoremodel_Arc,
	pnmlcoremodel_PlaceNode,
	pnmlcoremodel_TransitionNode,
	Arc,
	pnmlcoremodel_Place,
	Place,
	pnmlcoremodel_out,
	pnmlcoremodel_in,
	initialMarking,
	inscription,
	Place_marking,
	PTMarking_text,
	Arc_value,
	PTArcAnnotation_text

INVARIANT
	
	/*
	 * Start of user code INVARIANT (NOT GENERATED)
	 */
	
	/*
	 * End of user code
	 */
	
	
	pnmlcoremodel_ID : FIN(pnmlcoremodel_ID_AS) &
	pnmlcoremodel_Label : FIN(pnmlcoremodel_LABEL) &
	pnmlcoremodel_Object <: pnmlcoremodel_ID &
	PTMarking <: pnmlcoremodel_Label &
	PTArcAnnotation <: pnmlcoremodel_Label &
	pnmlcoremodel_Node <: pnmlcoremodel_Object &
	pnmlcoremodel_Arc <: pnmlcoremodel_Object &
	pnmlcoremodel_PlaceNode <: pnmlcoremodel_Node &
	pnmlcoremodel_TransitionNode <: pnmlcoremodel_Node &
	Arc <: pnmlcoremodel_Arc &
	pnmlcoremodel_Place <: pnmlcoremodel_PlaceNode &
	Place <: pnmlcoremodel_Place &
	pnmlcoremodel_out : pnmlcoremodel_Arc --> pnmlcoremodel_Node &
	pnmlcoremodel_in : pnmlcoremodel_Arc --> pnmlcoremodel_Node &
	initialMarking : Place >+> PTMarking &
	inscription : Arc >+> PTArcAnnotation &
	Place_marking : Place --> INTEGER &
	PTMarking_text : PTMarking --> NATURAL &
	Arc_value : Arc --> INTEGER &
	PTArcAnnotation_text : PTArcAnnotation --> NATURAL &
	PTMarking /\ PTArcAnnotation = {} &
	pnmlcoremodel_Node /\ pnmlcoremodel_Arc = {} &
	pnmlcoremodel_PlaceNode /\ pnmlcoremodel_TransitionNode = {}

INITIALISATION
	
	pnmlcoremodel_ID := {} ||
	pnmlcoremodel_Label := {} ||
	pnmlcoremodel_Object := {} ||
	PTMarking := {} ||
	PTArcAnnotation := {} ||
	pnmlcoremodel_Node := {} ||
	pnmlcoremodel_Arc := {} ||
	pnmlcoremodel_PlaceNode := {} ||
	pnmlcoremodel_TransitionNode := {} ||
	Arc := {} ||
	pnmlcoremodel_Place := {} ||
	Place := {} ||
	pnmlcoremodel_out := {} ||
	pnmlcoremodel_in := {} ||
	initialMarking := {} ||
	inscription := {} ||
	Place_marking := {} ||
	PTMarking_text := {} ||
	Arc_value := {} ||
	PTArcAnnotation_text := {}

OPERATIONS
	
	/*
	 * Start of user code OPERATIONS (NOT GENERATED)
	 */
	
	/*
	 * End of user code
	 */
	
	
	PTMarking_NEW(aPTMarking) = 
	PRE	aPTMarking : pnmlcoremodel_LABEL &
		aPTMarking /: pnmlcoremodel_Label
		
	THEN 
		PTMarking := PTMarking \/ {aPTMarking} ||
		pnmlcoremodel_Label := pnmlcoremodel_Label \/ {aPTMarking} ||
		PTMarking_text := PTMarking_text \/ {(aPTMarking |-> 0)}
	END;

	PTArcAnnotation_NEW(aPTArcAnnotation) = 
	PRE	aPTArcAnnotation : pnmlcoremodel_LABEL &
		aPTArcAnnotation /: pnmlcoremodel_Label
		
	THEN 
		PTArcAnnotation := PTArcAnnotation \/ {aPTArcAnnotation} ||
		pnmlcoremodel_Label := pnmlcoremodel_Label \/ {aPTArcAnnotation} ||
		PTArcAnnotation_text := PTArcAnnotation_text \/ {(aPTArcAnnotation |-> 1)}
	END;

	pnmlcoremodel_Arc_NEW(aArc,aSource,aTarget) = 
	PRE	aArc : pnmlcoremodel_ID_AS &
		aSource : pnmlcoremodel_Node &
		aTarget : pnmlcoremodel_Node &
		aArc /: pnmlcoremodel_ID
		
	THEN 
		pnmlcoremodel_Arc := pnmlcoremodel_Arc \/ {aArc} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID \/ {aArc} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object \/ {aArc} ||
		pnmlcoremodel_out := pnmlcoremodel_out \/ {(aArc |-> aSource)} ||
		pnmlcoremodel_in := pnmlcoremodel_in \/ {(aArc |-> aTarget)}
	END;

	Arc_NEW(aArc,aSource,aTarget) = 
	PRE	aArc : pnmlcoremodel_ID_AS &
		aSource : pnmlcoremodel_Node &
		aTarget : pnmlcoremodel_Node &
		aArc /: pnmlcoremodel_ID
		
	THEN 
		Arc := Arc \/ {aArc} ||
		pnmlcoremodel_Arc := pnmlcoremodel_Arc \/ {aArc} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID \/ {aArc} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object \/ {aArc} ||
		pnmlcoremodel_out := pnmlcoremodel_out \/ {(aArc |-> aSource)} ||
		pnmlcoremodel_in := pnmlcoremodel_in \/ {(aArc |-> aTarget)} ||
		Arc_value := Arc_value \/ {(aArc |-> 0)}
	END;

	pnmlcoremodel_Place_NEW(aPlace) = 
	PRE	aPlace : pnmlcoremodel_ID_AS &
		aPlace /: pnmlcoremodel_ID
		
	THEN 
		pnmlcoremodel_Place := pnmlcoremodel_Place \/ {aPlace} ||
		pnmlcoremodel_PlaceNode := pnmlcoremodel_PlaceNode \/ {aPlace} ||
		pnmlcoremodel_Node := pnmlcoremodel_Node \/ {aPlace} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID \/ {aPlace} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object \/ {aPlace}
	END;

	Place_NEW(aPlace) = 
	PRE	aPlace : pnmlcoremodel_ID_AS &
		aPlace /: pnmlcoremodel_ID
		
	THEN 
		Place := Place \/ {aPlace} ||
		pnmlcoremodel_PlaceNode := pnmlcoremodel_PlaceNode \/ {aPlace} ||
		pnmlcoremodel_Node := pnmlcoremodel_Node \/ {aPlace} ||
		pnmlcoremodel_Place := pnmlcoremodel_Place \/ {aPlace} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID \/ {aPlace} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object \/ {aPlace} ||
		Place_marking := Place_marking \/ {(aPlace |-> 0)}
	END;

	PTMarking_Free(aPTMarking) = 
	PRE	aPTMarking : PTMarking
		
	THEN 
		PTMarking := PTMarking - {aPTMarking} ||
		pnmlcoremodel_Label := pnmlcoremodel_Label - {aPTMarking} ||
		initialMarking := initialMarking |>> {aPTMarking} ||
		PTMarking_text := {aPTMarking} <<| PTMarking_text
	END;

	PTArcAnnotation_Free(aPTArcAnnotation) = 
	PRE	aPTArcAnnotation : PTArcAnnotation
		
	THEN 
		PTArcAnnotation := PTArcAnnotation - {aPTArcAnnotation} ||
		pnmlcoremodel_Label := pnmlcoremodel_Label - {aPTArcAnnotation} ||
		inscription := inscription |>> {aPTArcAnnotation} ||
		PTArcAnnotation_text := {aPTArcAnnotation} <<| PTArcAnnotation_text
	END;

	pnmlcoremodel_Arc_Free(aArc) = 
	PRE	aArc : pnmlcoremodel_Arc &
		aArc /: Arc
		
	THEN 
		pnmlcoremodel_Arc := pnmlcoremodel_Arc - {aArc} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID - {aArc} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object - {aArc} ||
		pnmlcoremodel_out := {aArc} <<| pnmlcoremodel_out ||
		pnmlcoremodel_in := {aArc} <<| pnmlcoremodel_in
	END;

	Arc_Free(aArc) = 
	PRE	aArc : Arc
		
	THEN 
		Arc := Arc - {aArc} ||
		pnmlcoremodel_Arc := pnmlcoremodel_Arc - {aArc} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID - {aArc} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object - {aArc} ||
		pnmlcoremodel_out := {aArc} <<| pnmlcoremodel_out ||
		pnmlcoremodel_in := {aArc} <<| pnmlcoremodel_in ||
		inscription := {aArc} <<| inscription ||
		Arc_value := {aArc} <<| Arc_value
	END;

	pnmlcoremodel_Place_Free(aPlace) = 
	PRE	aPlace : pnmlcoremodel_Place &
		aPlace /: Place &
		pnmlcoremodel_out~[{aPlace}] = {} &
		pnmlcoremodel_in~[{aPlace}] = {}
		
	THEN 
		pnmlcoremodel_Place := pnmlcoremodel_Place - {aPlace} ||
		pnmlcoremodel_PlaceNode := pnmlcoremodel_PlaceNode - {aPlace} ||
		pnmlcoremodel_Node := pnmlcoremodel_Node - {aPlace} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID - {aPlace} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object - {aPlace} ||
		pnmlcoremodel_out := pnmlcoremodel_out |>> {aPlace} ||
		pnmlcoremodel_in := pnmlcoremodel_in |>> {aPlace}
	END;

	Place_Free(aPlace) = 
	PRE	aPlace : Place &
		pnmlcoremodel_out~[{aPlace}] = {} &
		pnmlcoremodel_in~[{aPlace}] = {}
		
	THEN 
		Place := Place - {aPlace} ||
		pnmlcoremodel_PlaceNode := pnmlcoremodel_PlaceNode - {aPlace} ||
		pnmlcoremodel_Node := pnmlcoremodel_Node - {aPlace} ||
		pnmlcoremodel_Place := pnmlcoremodel_Place - {aPlace} ||
		pnmlcoremodel_ID := pnmlcoremodel_ID - {aPlace} ||
		pnmlcoremodel_Object := pnmlcoremodel_Object - {aPlace} ||
		pnmlcoremodel_out := pnmlcoremodel_out |>> {aPlace} ||
		pnmlcoremodel_in := pnmlcoremodel_in |>> {aPlace} ||
		initialMarking := {aPlace} <<| initialMarking ||
		Place_marking := {aPlace} <<| Place_marking
	END;

	result <-- pnmlcoremodel_Node_GetOut(aNode) = 
	PRE	aNode : pnmlcoremodel_Node &
		aNode : ran(pnmlcoremodel_out)
		
	THEN 
		result := pnmlcoremodel_out~[{aNode}]
	END;

	result <-- pnmlcoremodel_Node_GetIn(aNode) = 
	PRE	aNode : pnmlcoremodel_Node &
		aNode : ran(pnmlcoremodel_in)
		
	THEN 
		result := pnmlcoremodel_in~[{aNode}]
	END;

	result <-- pnmlcoremodel_Arc_GetSource(aArc) = 
	PRE	aArc : pnmlcoremodel_Arc &
		aArc : dom(pnmlcoremodel_out)
		
	THEN 
		result := pnmlcoremodel_out(aArc)
	END;

	result <-- pnmlcoremodel_Arc_GetTarget(aArc) = 
	PRE	aArc : pnmlcoremodel_Arc &
		aArc : dom(pnmlcoremodel_in)
		
	THEN 
		result := pnmlcoremodel_in(aArc)
	END;

	result <-- Place_GetInitialMarking(aPlace) = 
	PRE	aPlace : Place &
		aPlace : dom(initialMarking)
		
	THEN 
		result := initialMarking(aPlace)
	END;

	result <-- Arc_GetInscription(aArc) = 
	PRE	aArc : Arc &
		aArc : dom(inscription)
		
	THEN 
		result := inscription(aArc)
	END;

	pnmlcoremodel_Node_SetOut(aNode,theOut) = 
	PRE	aNode : pnmlcoremodel_Node &
		theOut : FIN(pnmlcoremodel_Arc) &
		(theOut * {aNode}) /<: pnmlcoremodel_out &
		pnmlcoremodel_out~[{aNode}] = {} &
		!added.( added : theOut => pnmlcoremodel_out[{added}] = {})
		
	THEN 
		pnmlcoremodel_out := (pnmlcoremodel_out |>> {aNode}) \/ (theOut * {aNode})
	END;

	pnmlcoremodel_Node_SetIn(aNode,theIn) = 
	PRE	aNode : pnmlcoremodel_Node &
		theIn : FIN(pnmlcoremodel_Arc) &
		(theIn * {aNode}) /<: pnmlcoremodel_in &
		pnmlcoremodel_in~[{aNode}] = {} &
		!added.( added : theIn => pnmlcoremodel_in[{added}] = {})
		
	THEN 
		pnmlcoremodel_in := (pnmlcoremodel_in |>> {aNode}) \/ (theIn * {aNode})
	END;

	pnmlcoremodel_Arc_SetSource(aArc,aSource) = 
	PRE	aArc : pnmlcoremodel_Arc &
		aSource : pnmlcoremodel_Node &
		{(aArc |-> aSource)} /<: pnmlcoremodel_out
		
	THEN 
		pnmlcoremodel_out := ({aArc} <<| pnmlcoremodel_out) \/ {(aArc |-> aSource)}
	END;

	pnmlcoremodel_Arc_SetTarget(aArc,aTarget) = 
	PRE	aArc : pnmlcoremodel_Arc &
		aTarget : pnmlcoremodel_Node &
		{(aArc |-> aTarget)} /<: pnmlcoremodel_in
		
	THEN 
		pnmlcoremodel_in := ({aArc} <<| pnmlcoremodel_in) \/ {(aArc |-> aTarget)}
	END;

	Place_SetInitialMarking(aPlace,aInitialMarking) = 
	PRE	aPlace : Place &
		aInitialMarking : PTMarking &
		{(aPlace |-> aInitialMarking)} /<: initialMarking &
		initialMarking~[{aInitialMarking}] = {}
		
	THEN 
		initialMarking := ({aPlace} <<| initialMarking) \/ {(aPlace |-> aInitialMarking)}
	END;

	Arc_SetInscription(aArc,aInscription) = 
	PRE	aArc : Arc &
		aInscription : PTArcAnnotation &
		{(aArc |-> aInscription)} /<: inscription &
		inscription~[{aInscription}] = {}
		
	THEN 
		inscription := ({aArc} <<| inscription) \/ {(aArc |-> aInscription)}
	END;

	pnmlcoremodel_Node_UnsetOut(aNode) = 
	PRE	aNode : pnmlcoremodel_Node &
		pnmlcoremodel_out~[{aNode}] = {}
		
	THEN 
		pnmlcoremodel_out := pnmlcoremodel_out |>> {aNode}
	END;

	pnmlcoremodel_Node_UnsetIn(aNode) = 
	PRE	aNode : pnmlcoremodel_Node &
		pnmlcoremodel_in~[{aNode}] = {}
		
	THEN 
		pnmlcoremodel_in := pnmlcoremodel_in |>> {aNode}
	END;

	Place_UnsetInitialMarking(aPlace) = 
	PRE	aPlace : Place
		
	THEN 
		initialMarking := {aPlace} <<| initialMarking
	END;

	Arc_UnsetInscription(aArc) = 
	PRE	aArc : Arc
		
	THEN 
		inscription := {aArc} <<| inscription
	END;

	pnmlcoremodel_Node_AddOut(aNode,aOut) = 
	PRE	aNode : pnmlcoremodel_Node &
		aOut : pnmlcoremodel_Arc &
		(aOut |-> aNode) /: pnmlcoremodel_out &
		pnmlcoremodel_out[{aOut}] = {}
		
	THEN 
		pnmlcoremodel_out := pnmlcoremodel_out \/ {(aOut |-> aNode)}
	END;

	pnmlcoremodel_Node_AddIn(aNode,aIn) = 
	PRE	aNode : pnmlcoremodel_Node &
		aIn : pnmlcoremodel_Arc &
		(aIn |-> aNode) /: pnmlcoremodel_in &
		pnmlcoremodel_in[{aIn}] = {}
		
	THEN 
		pnmlcoremodel_in := pnmlcoremodel_in \/ {(aIn |-> aNode)}
	END;

	pnmlcoremodel_Node_RemoveOut(aNode,aOut) = 
	PRE	aNode : pnmlcoremodel_Node &
		aOut : pnmlcoremodel_Arc &
		(aOut |-> aNode) : pnmlcoremodel_out &
		card(pnmlcoremodel_out[{aOut}]) >= 2
		
	THEN 
		pnmlcoremodel_out := pnmlcoremodel_out - {(aOut |-> aNode)}
	END;

	pnmlcoremodel_Node_RemoveIn(aNode,aIn) = 
	PRE	aNode : pnmlcoremodel_Node &
		aIn : pnmlcoremodel_Arc &
		(aIn |-> aNode) : pnmlcoremodel_in &
		card(pnmlcoremodel_in[{aIn}]) >= 2
		
	THEN 
		pnmlcoremodel_in := pnmlcoremodel_in - {(aIn |-> aNode)}
	END;

	Place_RemoveInitialMarking(aPlace,aInitialMarking) = 
	PRE	aPlace : Place &
		aInitialMarking : PTMarking &
		(aPlace |-> aInitialMarking) : initialMarking
		
	THEN 
		initialMarking := initialMarking - {(aPlace |-> aInitialMarking)}
	END;

	Arc_RemoveInscription(aArc,aInscription) = 
	PRE	aArc : Arc &
		aInscription : PTArcAnnotation &
		(aArc |-> aInscription) : inscription
		
	THEN 
		inscription := inscription - {(aArc |-> aInscription)}
	END;

	result <-- Place_GetMarking(aPlace) = 
	PRE	aPlace : Place &
		aPlace : dom(Place_marking)
		
	THEN 
		result := Place_marking(aPlace)
	END;

	result <-- PTMarking_GetText(aPTMarking) = 
	PRE	aPTMarking : PTMarking &
		aPTMarking : dom(PTMarking_text)
		
	THEN 
		result := PTMarking_text(aPTMarking)
	END;

	result <-- Arc_GetValue(aArc) = 
	PRE	aArc : Arc &
		aArc : dom(Arc_value)
		
	THEN 
		result := Arc_value(aArc)
	END;

	result <-- PTArcAnnotation_GetText(aPTArcAnnotation) = 
	PRE	aPTArcAnnotation : PTArcAnnotation &
		aPTArcAnnotation : dom(PTArcAnnotation_text)
		
	THEN 
		result := PTArcAnnotation_text(aPTArcAnnotation)
	END;

	Place_SetMarking(aPlace,aMarking) = 
	PRE	aPlace : Place &
		aMarking : INTEGER
		
	THEN 
		Place_marking := ({aPlace} <<| Place_marking)  \/ {(aPlace |-> aMarking)}
	END;

	PTMarking_SetText(aPTMarking,aText) = 
	PRE	aPTMarking : PTMarking &
		aText : NATURAL
		
	THEN 
		PTMarking_text := ({aPTMarking} <<| PTMarking_text)  \/ {(aPTMarking |-> aText)}
	END;

	Arc_SetValue(aArc,aValue) = 
	PRE	aArc : Arc &
		aValue : INTEGER
		
	THEN 
		Arc_value := ({aArc} <<| Arc_value)  \/ {(aArc |-> aValue)}
	END;

	PTArcAnnotation_SetText(aPTArcAnnotation,aText) = 
	PRE	aPTArcAnnotation : PTArcAnnotation &
		aText : NATURAL
		
	THEN 
		PTArcAnnotation_text := ({aPTArcAnnotation} <<| PTArcAnnotation_text)  \/ {(aPTArcAnnotation |-> aText)}
	END


END
